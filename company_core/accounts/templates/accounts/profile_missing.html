{% extends "base.html" %}

{% block title %}Profile Setup Required{% endblock %}

{% block content %}
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card shadow-sm border-0">
        <div class="card-body p-4 p-md-5">
          <h1 class="h3 fw-bold mb-2">Profile setup required</h1>
          <p class="text-muted mb-4">
            Your account is signed in, but it does not have a required business profile yet, so the dashboard can’t be loaded.
          </p>

          <div class="alert alert-warning" role="alert">
            <strong>Account:</strong>
            {% if request.user.is_authenticated %}{{ request.user.username }}{% else %}Unknown{% endif %}
            <br>
            <span class="small">A profile must be created and assigned (including occupation/business settings) by the business.</span>
          </div>

          <h2 class="h6 fw-bold mt-4">What to do</h2>
          <ul class="mb-4">
            <li>Contact <strong>{{ business_name|default:default_business_name }}</strong> and ask them to enable your dashboard profile.</li>
            <li>If you are an admin for the business, create the missing profile for this user in the admin panel.</li>
            <li>If you just created this account and something went wrong, log out and sign in again.</li>
          </ul>

          <div class="d-flex flex-wrap gap-2">
            <a class="btn btn-primary" href="{% url 'accounts:public_contact' %}">Contact us</a>
            <a class="btn btn-outline-secondary" href="{% url 'accounts:logout' %}">Log out</a>
            {% if request.user.is_staff %}
              <a class="btn btn-outline-dark" href="/admin/">Admin panel</a>
            {% endif %}
          </div>

          <hr class="my-4">
          <p class="small text-muted mb-0">
            If you believe this is an error, please mention “missing Profile for dashboard” when contacting us.
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

