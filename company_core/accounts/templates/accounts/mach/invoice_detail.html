<!-- company_core/accounts/templates/accounts/mach/invoice_detail.html -->

{% extends 'accounts/mach/mach_portal_base.html' %}

{% block content %}
<div class="container">
    <h1>Invoice Details</h1>
    
    <table class="table">
        <tr>
            <th>Invoice Number</th>
            <td>{{ invoice.invoice_number }}</td>
        </tr>
        <tr>
            <th>Bill To</th>
            <td>{{ invoice.bill_to }}</td>
        </tr>
        <tr>
            <th>Bill To Address</th>
            <td>{{ invoice.bill_to_address }}</td>
        </tr>
        <tr>
            <th>Bill To Email</th>
            <td>{{ invoice.bill_to_email }}</td>
        </tr>
        <tr>
            <th>VIN Number</th>
            <td>{{ invoice.vin_no }}</td>
        </tr>
        <tr>
            <th>Mileage</th>
            <td>{{ invoice.mileage }}</td>
        </tr>
        <tr>
            <th>Unit Number</th>
            <td>{{ invoice.unit_no }}</td>
        </tr>
        <tr>
            <th>Make & Model</th>
            <td>{{ invoice.make_model }}</td>
        </tr>
        <tr>
            <th>Total Amount</th>
            <td>{{ invoice.total_amount }}</td>
        </tr>
        <tr>
            <th>Total Paid</th>
            <td>{{ invoice.total_paid }}</td>
        </tr>
        <tr>
            <th>Balance Due</th>
            <td>{{ invoice.balance_due }}</td>
        </tr>
        <tr>
            <th>Date Fully Paid</th>
            <td>{{ invoice.date_fully_paid|date:"Y-m-d" }}</td>
        </tr>
        <!-- Add more fields as necessary -->
    </table>
    
    <!-- Display related income records -->
    <h2>Income Records</h2>
    <table class="table">
        <thead>
            <tr>
                <th>Record ID</th>
                <th>Amount</th>
                <th>Tax Collected</th>
                <!-- Add more columns as needed -->
            </tr>
        </thead>
        <tbody>
            {% for record in invoice.income_records.all %}
            <tr>
                <td>{{ record.id }}</td>
                <td>{{ record.amount }}</td>
                <td>{{ record.tax_collected }}</td>
                <!-- Add more data as needed -->
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <!-- Display related payments -->
    <h2>Payments</h2>
    <table class="table">
        <thead>
            <tr>
                <th>Payment ID</th>
                <th>Amount</th>
                <th>Date</th>
                <!-- Add more columns as needed -->
            </tr>
        </thead>
        <tbody>
            {% for payment in invoice.payments.all %}
            <tr>
                <td>{{ payment.id }}</td>
                <td>{{ payment.amount }}</td>
                <td>{{ payment.date|date:"Y-m-d" }}</td>
                <!-- Add more data as needed -->
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
</div>
{% endblock %}
